<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-100.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-50.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.20/fancybox/fancybox.css" integrity="sha256-RvRHGSuWAxZpXKV9lLDt2e+rZ+btzn48Wp4ueS3NZKs=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"liu-paopao.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.18.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="é€šè¿‡æŸ¥çœ‹å®˜æ–¹æ‰‹å†Œå’Œç½‘ä¸Šèµ„æ–™ï¼Œæ¢³ç† gcc å„ç§å¸¸è§çš„ç¼–è¯‘é€‰é¡¹">
<meta property="og:type" content="article">
<meta property="og:title" content="gcc ç¼–è¯‘é€‰é¡¹æ±‡æ€»">
<meta property="og:url" content="https://liu-paopao.github.io/posts/ec6fe1fe.html">
<meta property="og:site_name" content="PaoPao&#39;s Blog">
<meta property="og:description" content="é€šè¿‡æŸ¥çœ‹å®˜æ–¹æ‰‹å†Œå’Œç½‘ä¸Šèµ„æ–™ï¼Œæ¢³ç† gcc å„ç§å¸¸è§çš„ç¼–è¯‘é€‰é¡¹">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-04-30T09:04:33.000Z">
<meta property="article:modified_time" content="2023-06-16T07:26:55.406Z">
<meta property="article:author" content="paopao">
<meta property="article:tag" content="gcc">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://liu-paopao.github.io/posts/ec6fe1fe.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":"","permalink":"https://liu-paopao.github.io/posts/ec6fe1fe.html","path":"posts/ec6fe1fe.html","title":"gcc ç¼–è¯‘é€‰é¡¹æ±‡æ€»"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>gcc ç¼–è¯‘é€‰é¡¹æ±‡æ€» | PaoPao's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">PaoPao's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-folder-open fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#pic%E5%92%8C-fPIC%E9%80%89%E9%A1%B9"><span class="nav-number">1.</span> <span class="nav-text">-pic å’Œ -fPIC é€‰é¡¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fpie%E5%92%8C-fPIE%E9%80%89%E9%A1%B9"><span class="nav-number">2.</span> <span class="nav-text">-fpie å’Œ -fPIE é€‰é¡¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pie%E5%92%8C-no-pie%E9%80%89%E9%A1%B9"><span class="nav-number">3.</span> <span class="nav-text">-pie å’Œ -no-pie é€‰é¡¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pthread%E9%80%89%E9%A1%B9"><span class="nav-number">4.</span> <span class="nav-text">-pthread é€‰é¡¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#w-W-Wall%E5%85%B3%E9%97%AD%E7%BC%96%E8%AF%91%E8%AD%A6%E5%91%8A"><span class="nav-number">5.</span> <span class="nav-text">-w&#x2F;-W&#x2F;-Wall å…³é—­ç¼–è¯‘è­¦å‘Š</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="paopao"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">paopao</p>
  <div class="site-description" itemprop="description">Stay hungry, stay foolish.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">89</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
<!-- none-select-br -->

<p></p>

<!-- hitokoto -->

<div class="hitokoto-title">
	<i class="fa fa-paragraph"></i>
	<b>ä¸€è¨€</b>
</div>

<div id="hitokoto">:D è·å–ä¸­...</div>
<i id="hitofrom">:D è·å–ä¸­...</i>

<script src="https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"></script>
<script>
  fetch('https://v1.hitokoto.cn')
    .then(function (res){
      return res.json();
    })
    .then(function (data) {
      var hitokoto = document.getElementById('hitokoto');
      hitokoto.innerText = '\xa0\xa0\xa0\xa0\xa0\xa0\xa0' + data.hitokoto;
      var hitofrom = document.getElementById('hitofrom');
      hitofrom.innerText = "â€”â€”" + data.from + '\xa0'; 
    })
    .catch(function (err) {
      console.error(err);
    })
</script>
        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://liu-paopao.github.io/posts/ec6fe1fe.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="paopao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PaoPao's Blog">
      <meta itemprop="description" content="Stay hungry, stay foolish.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="gcc ç¼–è¯‘é€‰é¡¹æ±‡æ€» | PaoPao's Blog">
      <meta itemprop="description" content="é€šè¿‡æŸ¥çœ‹å®˜æ–¹æ‰‹å†Œå’Œç½‘ä¸Šèµ„æ–™ï¼Œæ¢³ç† gcc å„ç§å¸¸è§çš„ç¼–è¯‘é€‰é¡¹">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          gcc ç¼–è¯‘é€‰é¡¹æ±‡æ€»
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2022-04-30 17:04:33" itemprop="dateCreated datePublished" datetime="2022-04-30T17:04:33+08:00">2022-04-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-06-16 15:26:55" itemprop="dateModified" datetime="2023-06-16T15:26:55+08:00">2023-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BC%96%E8%AF%91%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">ç¼–è¯‘å™¨</span></a>
        </span>
    </span>

  
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
      <span>1.5k</span>
    </span>
    <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
      <span>5 åˆ†é’Ÿ</span>
    </span>
</div>

            <div class="post-description">é€šè¿‡æŸ¥çœ‹å®˜æ–¹æ‰‹å†Œå’Œç½‘ä¸Šèµ„æ–™ï¼Œæ¢³ç† gcc å„ç§å¸¸è§çš„ç¼–è¯‘é€‰é¡¹</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>-sharedï¼› Create a shared library /* åˆ›å»ºå…±äº«åº“æ—¶éœ€è¦æ·»åŠ çš„ç¼–è¯‘é€‰é¡¹ */<br>å› ä¸ºå…±äº«åº“çš„ä»£ç éƒ½æ˜¯ä½ç½®æ— å…³çš„ï¼Œæ‰€ä»¥é€šå¸¸è¿˜éœ€è¦æ·»åŠ ç¼–è¯‘é€‰é¡¹ - fPICã€‚</p>
<h2 id="picå’Œ-fPICé€‰é¡¹"><a href="#picå’Œ-fPICé€‰é¡¹" class="headerlink" title="-picå’Œ-fPICé€‰é¡¹"></a><code>-pic</code> å’Œ <code>-fPIC</code> é€‰é¡¹</h2><p><strong>PIC (position-independent code)</strong></p>
<p><code>-pic</code> å’Œ <code>-fPIC</code> éƒ½æ˜¯ç¼–è¯‘æ—¶çš„é€‰é¡¹ï¼Œç”¨äºç”Ÿæˆä½ç½®æ— å…³çš„ä»£ç  (Position-Independent-Code)ã€‚è¿™ä¸¤ä¸ªé€‰é¡¹éƒ½æ˜¯å¯ä»¥ä½¿ä»£ç åœ¨åŠ è½½åˆ°å†…å­˜æ—¶ä½¿ç”¨ç›¸å¯¹åœ°å€ï¼Œæ‰€æœ‰å¯¹å›ºå®šåœ°å€çš„è®¿é—®éƒ½é€šè¿‡å…¨å±€åç§»è¡¨ (GOT) æ¥å®ç°ã€‚</p>
<p><code>-pic</code> å’Œ <code>-fPIC</code> åŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li><code>-fpic</code> å¯¹ GOT è¡¨çš„å¤§å°æœ‰é™åˆ¶ã€‚å¦‚æœé“¾æ¥çš„å¯æ‰§è¡Œæ–‡ä»¶ GOT è¡¨ size è¶…è¿‡äº†æ¶æ„è®¾å®šçš„ maximum sizeï¼Œé“¾æ¥å™¨å°±ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™ <code>-fpic</code> å°±ä¸é€‚ç”¨äº†ã€‚</li>
<li><code>-fPIC</code> å¯¹ GOT è¡¨å¤§å°æ— é™åˆ¶ï¼Œæ‰€ä»¥å¦‚æœåœ¨ä¸ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨ <code>-fPIC</code>ã€‚</li>
</ul>
<p>PIC å®ç°åŸç†ï¼š</p>
<p>ï¼ˆ1ï¼‰GOTï¼šåœ¨åŠ¨æ€åº“çš„æ•°æ®æ®µå¢åŠ  GOTï¼ˆGlobal Offset Tableï¼‰ï¼Œè¯¥è¡¨çš„æ¯ä¸€é¡¹æ˜¯ç¬¦å·åˆ°åœ°å€çš„ç»å¯¹æ˜ å°„ã€‚ç”±äºä»£ç æ®µåˆ°æ•°æ®æ®µçš„åç§»æ˜¯å›ºå®šçš„ï¼Œå› æ­¤å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç¡®å®šä»£ç æ®µä¸­çš„æŸä¸ªç¬¦å·åˆ° GOT ç‰¹å®šé¡¹ä¹‹é—´çš„åç§»ã€‚è¿™æ ·ï¼Œä»£ç æ®µä¸­çš„ç¬¦å·åç§»å°±å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç¡®å®šäº†ï¼Œåœ¨åŠ è½½æ—¶ä¹Ÿæ— éœ€ä¿®æ”¹ä»£ç æ®µçš„å†…å®¹ï¼Œåªéœ€è¦å¡«å†™ä½äºæ•°æ®æ®µçš„ GOT çš„æ‰€æœ‰é¡¹çš„ç¬¦å·çš„ç»å¯¹åœ°å€å°±å®Œæˆäº†ã€‚å› ä¸ºæ•°æ®æ®µæœ¬æ¥å°±æ˜¯è¿›ç¨‹é—´ä¸å…±äº«ï¼Œæ¯ä¸ªè¿›ç¨‹ç‹¬ç«‹çš„ä¸€ä»½ï¼Œå› æ­¤ GOT çš„è®¾è®¡å®Œå…¨è§£å†³äº†ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ï¼Œä»è€Œè¾¾åˆ°ä¸¤ä¸ªç›®çš„ï¼š1ï¼Œä»£ç æ®µå¯ä»¥åœ¨å¤šè¿›ç¨‹é—´å…±äº«ï¼›2ï¼Œä»£ç æ®µæ˜¯åªè¯»çš„ã€‚</p>
<p>ï¼ˆ2ï¼‰PLTï¼šPLT æ˜¯ Program Linkage Table çš„ç¼©å†™ï¼Œå³ç¨‹åºé“¾æ¥è¡¨ï¼ŒPLT çš„å‡ºç°æ˜¯ä¸ºäº†å»¶æ—¶å®šä½çš„ç›®çš„ã€‚ä¸€ä¸ªåŠ¨æ€åº“ä¸­çš„å‡½æ•°å¾€å¾€è¦è¿œå¤šäºå…¨å±€å˜é‡ï¼Œå¹¶ä¸”è¢«è°ƒç”¨çš„å‡½æ•°å¾€å¾€å°‘äºå®šä¹‰çš„å‡½æ•°ã€‚GOT ä¸­åŒ…å«äº†è¯¥åŠ¨æ€åº“ä¸­çš„æ‰€æœ‰çš„å…¨å±€å˜é‡çš„æ˜ å°„ï¼Œå¹¶ä¸”åœ¨è¿æ¥å™¨åŠ è½½æ—¶è§£ææ‰€æœ‰çš„å…¨å±€å˜é‡çš„åœ°å€ã€‚å¦‚æœç”¨åŒæ ·çš„æ–¹å¼å»å¤„ç†å‡½æ•°è°ƒç”¨ç¬¦å·ï¼Œåˆ™å¼€é”€ä¼šéå¸¸å¤§ã€‚å› æ­¤åœ¨ä»£ç æ®µè®¾è®¡äº†ä¸€ä¸ª PLT è¡¨ï¼Œæ¯ä¸€é¡¹å…¶å®æ˜¯ä¸ªä»£ç æ®µï¼Œç”¨äºæ‰§è¡Œå¦‚ä¸‹é€»è¾‘ï¼šé¦–æ¬¡è®¿é—®æ—¶ï¼Œè§£æå‚æ•°å’Œå‘ GOT å¡«å†™å‡½æ•°åœ°å€ï¼Œåç»­è®¿é—®ç›´æ¥è®¿é—® GOT ä¸­çš„å‡½æ•°åœ°å€ã€‚å¦‚æ­¤è¾¾åˆ°äº†å»¶æ—¶å®šä½çš„ç›®çš„ã€‚</p>
<p>å› æ­¤ï¼Œä¸€ä¸ª PIC çš„åŠ¨æ€åº“ä¸­ï¼Œå¯¹å…¨å±€å˜é‡ä½¿ç”¨ GOT æ¥æ˜ å°„ï¼Œå¯¹å‡½æ•°è°ƒç”¨ä½¿ç”¨ PLT+GOT æ¥æ˜ å°„ï¼Œä»è€Œè¾¾åˆ°å…±äº«åº“ä»£ç æ®µå¤ç”¨ï¼Œä»£ç æ®µå®‰å…¨è®¿é—®çš„ç›®çš„ã€‚è€Œè¿™äº›å°±æ˜¯ PIC çš„æ„ä¹‰ã€‚</p>
<p>GCC å®˜æ–¹æ‰‹å†Œè§£é‡Šï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-fpic</span><br><span class="line">Generate position-independent code (PIC) suitable for use in a shared library, if supported for the target machine. Such code accesses all constant addresses through a global offset table (GOT). The dynamic loader resolves the GOT entries when the program starts (the dynamic loader is not part of GCC; it is part of the operating system). If the GOT size for the linked executable exceeds a machine-specific maximum size, you get an error message from the linker indicating that -fpic does not work; in that case, recompile with -fPIC instead. (These maximums are 8k on the SPARC, 28k on AArch64 and 32k on the m68k and RS/6000. The x86 has no such limit.)</span><br><span class="line"></span><br><span class="line">Position-independent code requires special support, and therefore works only on certain machines. For the x86, GCC supports PIC for System V but not for the Sun 386i. Code generated for the IBM RS/6000 is always position-independent.</span><br><span class="line"></span><br><span class="line">When this flag is set, the macros __pic__ and __PIC__ are defined to 1.</span><br><span class="line"></span><br><span class="line">-fPIC</span><br><span class="line">If supported for the target machine, emit position-independent code, suitable for dynamic linking and avoiding any limit on the size of the global offset table. This option makes a difference on AArch64, m68k, PowerPC and SPARC.</span><br><span class="line"></span><br><span class="line">Position-independent code requires special support, and therefore works only on certain machines.</span><br><span class="line"></span><br><span class="line">When this flag is set, the macros __pic__ and __PIC__ are defined to 2.</span><br></pre></td></tr></tbody></table></figure>

<h2 id="fpieå’Œ-fPIEé€‰é¡¹"><a href="#fpieå’Œ-fPIEé€‰é¡¹" class="headerlink" title="-fpieå’Œ-fPIEé€‰é¡¹"></a><code>-fpie</code> å’Œ <code>-fPIE</code> é€‰é¡¹</h2><p><strong>PIE (position-independent executable)</strong></p>
<p><code>-fpie</code> å’Œ <code>-fPIE</code> é€‰é¡¹ä¸ <code>-pic</code> å’Œ <code>-fPIC</code> æ˜¯ç±»ä¼¼çš„ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯åŠ ä¸Š <code>-fpie</code> å’Œ <code>-fPIE</code> è¿™ä¸¤ä¸ªé€‰é¡¹åç¼–è¯‘ç”Ÿæˆçš„ä½ç½®æ— å…³ä»£ç åªèƒ½è¢«ç”¨äºé“¾æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>å³ï¼š<code>-fPIC</code> ç”¨äºç”ŸæˆåŠ¨æ€åº“ï¼Œ<code>-fPIE</code> ç”¨äºç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p><strong>è‹¥æƒ³é€šè¿‡ gcc ç¼–è¯‘å‡ºä½ç½®æ— å…³çš„å¯æ‰§è¡Œç¨‹åºï¼Œå¿…é¡»åŒæ—¶ä½¿ç”¨ <code>-fPIE</code> å’Œ <code>-pie</code> é€‰é¡¹ã€‚å…¶ä¸­ï¼Œ<code>-fPIE</code> é€‰é¡¹ç”¨äºç¼–è¯‘å™¨ï¼Œä½¿ç”¨è¯¥é€‰é¡¹ä».c ç¼–è¯‘å‡ºæ¥çš„.o æ–‡ä»¶å°†æ˜¯ä½ç½®æ— å…³çš„ç›®æ ‡æ–‡ä»¶ï¼›è€Œ <code>-pie</code> é€‰é¡¹åˆ™ç”¨äºé“¾æ¥å™¨ï¼Œä½¿ç”¨è¯¥é€‰é¡¹åï¼Œé“¾æ¥å™¨èƒ½å¤ŸæŠŠ <code>-fPIE</code> é€‰é¡¹ä¸‹ç¼–è¯‘å‡ºæ¥çš„.o æ–‡ä»¶è¿›ä¸€æ­¥é“¾æ¥æˆä½ç½®æ— å…³çš„å¯æ‰§è¡Œç¨‹åºã€‚</strong></p>
<p>GCC å®˜æ–¹æ‰‹å†Œè§£é‡Šï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-fpie</span><br><span class="line">-fPIE</span><br><span class="line">These options are similar to -fpic and -fPIC, but the generated position-independent code can be only linked into executables. Usually these options are used to compile code that will be linked using the -pie GCC option.</span><br><span class="line"></span><br><span class="line">-fpie and -fPIE both define the macros __pie__ and __PIE__. The macros have the value 1 for -fpie and 2 for -fPIE.</span><br></pre></td></tr></tbody></table></figure>

<h2 id="pieå’Œ-no-pieé€‰é¡¹"><a href="#pieå’Œ-no-pieé€‰é¡¹" class="headerlink" title="-pieå’Œ-no-pieé€‰é¡¹"></a><code>-pie</code> å’Œ <code>-no-pie</code> é€‰é¡¹</h2><p><code>-pie</code> å’Œ <code>-no-pie</code> å±äºé“¾æ¥é€‰é¡¹ï¼Œ</p>
<ul>
<li><code>-pie</code> è¡¨ç¤ºç”ŸæˆåŠ¨æ€é“¾æ¥çš„ä½ç½®æ— å…³çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå‰ææ˜¯ç¼–è¯‘é˜¶æ®µä½¿ç”¨äº† <code>-fpie</code> å’Œ <code>-fPIE</code> é€‰é¡¹ã€‚</li>
<li><code>-no-pie</code> è¡¨ç¤ºä¸ç”Ÿæˆï¼Œå’Œ <code>-pie</code> æ„æ€ç›¸åã€‚</li>
</ul>
<p>GCC å®˜æ–¹æ‰‹å†Œè§£é‡Šï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-pie</span><br><span class="line">Produce a dynamically linked position independent executable on targets that support it. For predictable results, you must also specify the same set of options used for compilation (-fpie, -fPIE, or model suboptions) when you specify this linker option.</span><br><span class="line"></span><br><span class="line">-no-pie</span><br><span class="line">Donâ€™t produce a dynamically linked position independent executable.</span><br></pre></td></tr></tbody></table></figure>

<h2 id="pthreadé€‰é¡¹"><a href="#pthreadé€‰é¡¹" class="headerlink" title="-pthreadé€‰é¡¹"></a><code>-pthread</code> é€‰é¡¹</h2><p><code>-pthread</code> è¡¨ç¤ºé“¾æ¥ POSIX çº¿ç¨‹åº“ã€‚æœ‰äº›æ¶æ„ä¸‹ï¼Œæ­¤é€‰é¡¹è¿˜ä¼šä¸ºé¢„å¤„ç†å™¨è®¾ç½® flagsï¼Œæ‰€ä»¥è¯¥é€‰é¡¹ä¼šåŒæ—¶èµ·ä½œç”¨äºç¼–è¯‘å’Œé“¾æ¥é˜¶æ®µã€‚</p>
<p>GCC å®˜æ–¹æ‰‹å†Œè§£é‡Šï¼š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-pthread</span><br><span class="line">Link with the POSIX threads library. This option is supported on GNU/Linux targets, most other Unix derivatives, and also on x86 Cygwin and MinGW targets. On some targets this option also sets flags for the preprocessor, so it should be used consistently for both compilation and linking.</span><br></pre></td></tr></tbody></table></figure>

<h2 id="w-W-Wallå…³é—­ç¼–è¯‘è­¦å‘Š"><a href="#w-W-Wallå…³é—­ç¼–è¯‘è­¦å‘Š" class="headerlink" title="-w/-W/-Wallå…³é—­ç¼–è¯‘è­¦å‘Š"></a><code>-w/-W/-Wall</code> å…³é—­ç¼–è¯‘è­¦å‘Š</h2><p><code>-w</code>ï¼šå…³é—­ç¼–è¯‘æ—¶æ‰€æœ‰çš„è­¦å‘Š warningï¼Œä½¿ç”¨è¯¥é€‰é¡¹åï¼Œç¼–è¯‘ç•Œé¢éå¸¸æ¸…çˆ½ã€‚</p>
<p><code>-Wall</code>ï¼šç¼–è¯‘æ—¶æ˜¾ç¤ºæ‰€æœ‰è­¦å‘Š warningã€‚</p>
<p><code>-W</code>ï¼šç¼–è¯‘æ—¶æ˜¾ç¤ºç¼–è¯‘å™¨è®¤ä¸ºä¼šå¯¼è‡´æŠ¥é”™çš„è­¦å‘Šã€‚</p>

    </div>

    
    
    

<div>
  
    <div>
    
<br>
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------ã€€ã€€æœ¬æ–‡ç»“æŸã€€ğŸ‘£ã€€æ­¥å±¥ä¸æ­¢ã€€ã€€-------------</div>
<br>
    
</div>
  
</div>

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/gcc/" rel="tag"><i class="fa fa-tag"></i> gcc</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/2732b274.html" rel="prev" title="Linux ä¸€è¡Œæ‰§è¡Œå¤šæ¡å‘½ä»¤">
                  <i class="fa fa-angle-left"></i> Linux ä¸€è¡Œæ‰§è¡Œå¤šæ¡å‘½ä»¤
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/bf48f70d.html" rel="next" title="é€šè¿‡ qemu+gdb å®ç°è·¨æ¶æ„è°ƒè¯•">
                  é€šè¿‡ qemu+gdb å®ç°è·¨æ¶æ„è°ƒè¯• <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heartbeat"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">paopao</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">75k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">4:33</span>
  </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.20/fancybox/fancybox.umd.js" integrity="sha256-q8XkJ6dj5VwSvzI8+nATCHHQG+Xv/dAZBCgqmu93zOY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>



  




<script class="next-config" data-name="changyan" type="application/json">{"enable":true,"appid":"cyw09gPog","appkey":"4488e6b82bfe3d819f4971a5e5c115f4","count":true}</script>
<script src="/js/third-party/comments/changyan.js"></script>

</body>
</html>
